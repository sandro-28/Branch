üìÇ MASTER CONTEXT : PROJET "BRANCH" (REBOOT)
Ceci est la documentation de r√©f√©rence absolue. Oublie les instructions pr√©c√©dentes contradictoires.

1. VISION & √âCOSYST√àME (LE BUT)
Nous d√©veloppons "Branch", l'application centrale (Control Plane) de mon infrastructure.

Son R√¥le : Branch servira de tableau de bord pour cr√©er et g√©rer les bases de donn√©es de toutes mes futures applications.

L'√âcosyst√®me : Mes futures applications (Client Apps) seront elles aussi d√©ploy√©es sur ce m√™me VPS. Branch en sera le "Cerveau" technique.

2. INFRASTRUCTURE & D√âPLOIEMENT
Serveur : VPS Hostinger (Ubuntu 24.04).

Orchestration : Coolify (g√®re les conteneurs Docker et le r√©seau interne).

Base de Donn√©es : Instance Supabase/PostgreSQL h√©berg√©e sur le VPS.

M√©thode de D√©ploiement : GitOps.

Le code est h√©berg√© sur GitHub : sandro-28/Branch

Tu ne d√©ploies JAMAIS manuellement.

Ton Workflow : Coder -> git push origin main -> Coolify d√©tecte le changement et d√©ploie automatiquement sur le VPS.

‚õî INTERDIT :

Pas de Vercel (On est 100% VPS).

Pas de docker-compose manuel (Coolify s'en charge).

Pas de base de donn√©es locale (SQLite, etc.).

3. CONNEXION DATABASE (LA R√àGLE DUALE)
L'application doit pouvoir se connecter √† la base de donn√©es dans deux contextes diff√©rents :

A. En Local (Sur mon PC / D√©veloppement)
Utilis√© pour le npm run dev et les migrations drizzle-kit push.

Host : coolify.sandro.click (Acc√®s via Internet)

Port : 5432 (Le port public ouvert par Coolify, ex: 5432)

User : postgres

Password : rL66nTjm9n0ClBoU31eOm6KYeWrZ5WrxvX5alCpbzEXGQuviim3Ojuh7sUdnEDFW

SSL : Obligatoire (?sslmode=require).

B. En Production (Une fois d√©ploy√© sur le VPS)
Utilis√© par l'application qui tourne dans le Docker.

Host : postgresql-database-hwksscs8c0sk44sg0s88o8ws (Acc√®s via r√©seau interne Docker)

Port : 5432

Note : Tu n'as pas √† g√©rer √ßa dans le code, Coolify injectera la bonne variable DATABASE_URL en prod.

4. VARIABLES D'ENVIRONNEMENT LOCALES (.env.local)
Configure ce fichier sur ma machine pour le d√©veloppement :

Bash

# Connexion EXTERNE pour travailler depuis mon PC
DATABASE_URL="postgres://postgres:rL66nTjm9n0ClBoU31eOm6KYeWrZ5WrxvX5alCpbzEXGQuviim3Ojuh7sUdnEDFW@hwksscs8c0sk44sg0s88o8ws:5432/postgres"

# URLs locales
NEXT_PUBLIC_APP_URL="http://localhost:3000"
BETTER_AUTH_URL="http://localhost:3000"
BETTER_AUTH_SECRET="rL66nTjm9n0ClBoU31eOm6KYeWrZ5WrxvX5alCpbzEXGQuviim3Ojuh7sUdnEDFW"
5. STACK TECHNIQUE
Framework : Next.js 15 (App Router, TypeScript).

Auth : Better-Auth.

Route API obligatoire : app/api/auth/[...all]/route.ts.

Config trustedOrigins : Doit inclure https://branch.sandro.click.

ORM : Drizzle ORM.

6. PREMI√àRE MISSION
Si le projet est vide :

Initialise Next.js (npx create-next-app...).

Installe Drizzle & Better-Auth.

Configure la connexion DB avec les infos ci-dessus.

Fais un git push pour valider que le d√©ploiement Coolify fonctionne.